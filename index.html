<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>チームビルディング・カードゲーム</title>

  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", sans-serif; line-height: 1.5; }
    .muted { color:#666; font-size:12px; }

    .grid{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      padding:0;
      margin:8px 0 0 0;
      list-style:none;
    }

    .card{
      width:180px;
      min-height:110px;
      border:2px solid #333;
      border-radius:12px;
      padding:10px;
      box-sizing:border-box;
      user-select:none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:8px;
    }

    /* 選択中（手札だけで使う） */
    .card.clickable { cursor:pointer; }
    .selected{
      border-color:#0b57d0;
      box-shadow: 0 0 0 3px rgba(11,87,208,0.18), 0 3px 10px rgba(0,0,0,0.14);
      font-weight:700;
    }

    /* ✅ 色分け（日本語カード名に合わせて） */
   /* ✅ 色分け（ハッキリ分ける：背景＋左枠で識別） */
.type-environment { background:#dff7ff; border-color:#0aa2c0; } /* 環境：水色 */
.type-budget      { background:#e7ffe7; border-color:#1b7f2a; } /* 予算：緑 */
.type-riskmgmt    { background:#ffe3e3; border-color:#c62828; } /* リスク：赤 */
.type-people      { background:#e8f0ff; border-color:#2a5bd7; } /* 人材：青 */
.type-quality     { background:#fff1cc; border-color:#b7791f; } /* 品質：黄 */
.type-time        { background:#f1e8ff; border-color:#6a3fb1; } /* 時間：紫 */


    .card-title { font-size:18px; font-weight:800; text-align:center; }
    .card-sub { font-size:12px; color:#444; text-align:center; }

    .btnrow{
      display:flex;
      gap:8px;
      justify-content:center;
      margin-top:6px;
    }
    button { cursor:pointer; }

    #adminPanel{
      border:1px solid #ccc;
      padding:12px;
      margin:12px 0;
      border-radius:10px;
      background:#fafafa;
    }
    #inviteLinks li{ margin:6px 0; word-break: break-all; }
  </style>
</head>

<body>
  <h1>チームビルディング・カードゲーム</h1>

  <p id="meLabel" style="font-weight:bold;"></p>
  <p class="muted">※ 手札のカードをクリックすると「交換に出すカード」として選択されます</p>

  <!-- 運営パネル -->
  <div id="adminPanel" style="display:none;">
    <h2>運営パネル</h2>
    <button onclick="dealCards()">カードを配布（運営のみ）</button>

    <h3>参加者URL</h3>
    <ul id="inviteLinks"></ul>
  </div>

  <hr />

  <button onclick="showHand()">自分の手札を表示</button>
  <h2 id="handTitle"></h2>
  <p id="selectedText">選択中：なし</p>

  <!-- 手札（カード型） -->
  <ul id="hand" class="grid"></ul>

  <h3>交換</h3>
  <label>交換相手：</label>
  <select id="partnerSelect"></select>
  <button onclick="requestTrade()">交換リクエスト（選択カードを出す）</button>

  <h3>送信中リクエスト（自分→相手）</h3>
  <ul id="outgoing" class="grid"></ul>

  <h3>受信中リクエスト（相手→自分）</h3>
  <p class="muted">※ 承認する前に、あなたも「渡す1枚」を手札から選んでください</p>
  <ul id="incoming" class="grid"></ul>

  <hr />
  <h3>ログ</h3>
  <pre id="log" style="white-space:pre-wrap;"></pre>

  <!-- Firebase SDK（順番厳守） -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <script src="script.js"></script>
</body>
</html>

